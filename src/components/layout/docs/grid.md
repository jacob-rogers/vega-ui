# Grid

Содержит логику для работы с сеткой лэйаута.

## Структура

Структурно сетка представляет собой полное или идеальное бинарное дерево. 

<img src="./trees.png">

где каждый внутренний узел это `SplitView`, а каждый листовой узел — `DataView`

`SplitView` всегда должен иметь два дочерних узла,
которые являются либо другим(и) `SplitView`, либо `DataView`

<img src="./grid-cases.png">

## Разделение (Split)

Разделить можно только узел `DataView`, который при разделении клонируется в заданное направление разделения.

На месте разделяемого `DataView` создается `SplitView`, а его дочерними элементами становятся разделяемый `DataView` и его копия.

<img src="./split.png">

## Закрытие

Закрыть можно только узел `DataView`.
При закрытии узла соседнее поддерево поднимается на место родителя. 

<img src="./close.png">

## Схема состояния

```ts
interface Branch {
  type: 'branch';
  data: {
    splitDirection: 'up' | 'down' | 'left' | 'right'; // направление, в котором было разделение
    breakpoint: number; // положение разделителя в процентах
  };
}

interface Leaf<T> {
  type: 'leaf';
  data: {
    widget: string; // название (селектор) выбранного виджета
    context: T; // начальное состояние виджета
  };
}

interface State {
  [idx: number]: Branch | Leaf;
}
```

Состояние хранится в плоском виде.
